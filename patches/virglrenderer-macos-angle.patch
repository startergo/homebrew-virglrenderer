diff --git a/meson.build b/meson.build
index 1234567..abcdefg 100644
--- a/meson.build
+++ b/meson.build
@@ -61,7 +61,11 @@ thread_dep = dependency('threads')
 epoxy_dep = dependency('epoxy', version: '>= 1.5.4')
 m_dep = cc.find_library('m', required : false)

+if host_machine.system() != 'darwin'
 libdrm_dep = dependency('libdrm', version : '>=2.4.50', required: get_option('drm').enabled() or get_option('venus'))
+else
+libdrm_dep = dependency('', required: false)
+endif

 conf_data = configuration_data()
 conf_data.set('VERSION', meson.project_version())
@@ -247,7 +251,7 @@ if with_egl
       gbm_dep = dependency('gbm', version: '>= ' + _gbm_ver, required: require_egl)
     endif
     conf_data.set('ENABLE_GBM', gbm_dep.found())
-  else
+  elif not (host_machine.system() == 'darwin' and epoxy_dep.get_variable(pkgconfig: 'epoxy_has_egl') == '1')
     assert(not require_egl,
            'egl was explicitely requested but it is not supported by epoxy')
   endif
@@ -275,7 +279,9 @@ with_venus = get_option('venus')
 with_render_server = with_venus
 with_render_server_worker = get_option('render-server-worker')
 render_server_install_dir = get_option('prefix') / get_option('libexecdir')
 if with_venus
-  gbm_dep = dependency('gbm')
+  # gbm not available on macOS, Venus can work with MoltenVK directly
+  gbm_dep = dependency('gbm', required: host_machine.system() != 'darwin')
   venus_dep = dependency('vulkan')

   conf_data.set('ENABLE_VENUS', 1)
diff --git a/src/virgl_renderer.h b/src/virgl_renderer.h
index 1234567..abcdefg 100644
--- a/src/virgl_renderer.h
+++ b/src/virgl_renderer.h
@@ -36,7 +36,7 @@ extern "C" {
 #include <stdint.h>
 #include <stddef.h>

-#ifdef __APPLE__
+#if 0
 /* On macOS, use the system OpenGL framework */
 #include <OpenGL/gl3.h>
 #else
